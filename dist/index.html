<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Sankey TS ‚Äî Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body { height: 100%; margin: 0; }
    .page { min-height: 100vh; display: flex; flex-direction: column; }
    .main { position: relative; flex: 1 1 auto; min-height: 0; overflow: auto; }
    #app { position: relative; height: 100%; min-height: 560px; }
    .uploader { display:flex; gap:12px; align-items:center; flex-wrap:wrap; padding:8px 12px; background:#0b1220; color:#e2e8f0; border-bottom:1px solid rgba(255,255,255,0.08);}
    .uploader small { opacity:.75; }
    .kbd { font: 12px/1 ui-monospace, SFMono-Regular, Menlo, monospace; background:#d8dadc; border:1px solid rgba(255,255,255,.15); border-radius:6px; padding:2px 6px; }
  </style>

    <script type="module" crossorigin src="/sankey-ts/assets/index-CRtsj2Fk.js"></script>
    <link rel="stylesheet" crossorigin href="/sankey-ts/assets/index-DkZmF6mS.css">
  </head>
  <body>
    <div class="page">
      <div class="toolbar" style="flex-wrap: wrap">
        <div class="pill" title="–ú–∞—Å—à—Ç–∞–± —Ç–æ–ª—â–∏–Ω—ã –ª–∏–Ω–∏–π (px –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É value)">
          –¢–æ–ª—â–∏–Ω–∞ –ø–æ—Ç–æ–∫–æ–≤:
          <input id="scale" type="range" min="0.5" max="6" step="0.1" value="2" />
          <span id="scaleVal">2.0x</span>
        </div>

        <div class="pill" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ä–∞—Å–∫–ª–∞–¥–∫—É –ø–æ–¥ –∏–º–µ–Ω–µ–º">
          <input id="layoutName" type="text" placeholder="–ò–º—è –≤–∞—Ä–∏–∞–Ω—Ç–∞" style="min-width:160px" />
          <button id="saveAsBtn" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫‚Ä¶</button>
        </div>

        <div class="pill" title="–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç">
          <select id="layoutSelect" style="min-width:180px">
            <option value="">‚Äî —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã ‚Äî</option>
          </select>
          <button id="loadSelectedBtn" class="btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
          <button id="deleteSelectedBtn" class="btn btn-danger" title="–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç">–£–¥–∞–ª–∏—Ç—å</button>
        </div>

        <div class="pill" title="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–æ–º">
          <button id="zoomOutBtn" class="btn" aria-label="–£–º–µ–Ω—å—à–∏—Ç—å –º–∞—Å—à—Ç–∞–±">‚àí</button>
          <button id="fitBtn" class="btn" aria-label="–£–º–µ—Å—Ç–∏—Ç—å –≤ —ç–∫—Ä–∞–Ω">Fit</button>
          <button id="zoomInBtn" class="btn" aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å –º–∞—Å—à—Ç–∞–±">+</button>
        </div>

        <button id="resetBtn" class="btn" title="–ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –∞–≤—Ç–æ—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ">–°–±—Ä–æ—Å</button>
        <button id="exportBtn" class="btn" title="–≠–∫—Å–ø–æ—Ä—Ç —Ç–µ–∫—É—â–µ–π —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –≤ JSON">–≠–∫—Å–ø–æ—Ä—Ç JSON</button>
        <button id="helpBtn" class="btn btn-ghost" title="–°–ø—Ä–∞–≤–∫–∞ (–∫–ª–∞–≤–∏—à–∞ ?)">?</button>
      </div>

      <div class="uploader">
        <div class="pill">
          <label>links.csv:
            <input id="linksFile" type="file" accept=".csv,text/csv" />
          </label>
        </div>
        <div class="pill">
          <label>nodes.csv (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
            <input id="nodesFile" type="file" accept=".csv,text/csv" />
          </label>
        </div>
        <button id="buildBtn" class="btn">–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É</button>
        <small>–§–æ—Ä–º–∞—Ç—ã: links.csv ‚Äî <code>source,target,value[,color]</code>; nodes.csv ‚Äî <code>id[,label][,color][,x][,y][,width][,height]</code></small>
      </div>

      <div class="import-btn">
        <button id="btn-import-json">üìÇ –ò–º–ø–æ—Ä—Ç JSON</button>       
      </div>
      
      <main class="main" aria-label="–û–±–ª–∞—Å—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã">
        <div id="app"></div>
        <div class="panel">
          <h3>–≠–∫—Å–ø–æ—Ä—Ç —Ä–∞—Å–∫–ª–∞–¥–∫–∏</h3>
          <textarea id="exportBox" placeholder="–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è JSON —Ä–∞—Å–∫–ª–∞–¥–∫–∏"></textarea>
          <p style="opacity:.7; font-size:12px; margin-top:8px;">
            –ü–æ–¥—Å–∫–∞–∑–∫–∞: –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ —É–∑–ª—É/—Å–≤—è–∑–∏ ‚Äî —Å–º–µ–Ω–∞ —Ü–≤–µ—Ç–∞. –ö–æ–ª–µ—Å–æ –º—ã—à–∏ ‚Äî –∑—É–º, –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ–Ω–∞ ‚Äî –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ.
          </p>
        </div>
      </main>

      <footer class="footer">
        <div class="footer-content">
          <span>‚ìò –≠—Ç–æ –¥–µ–º–æ Sankey –Ω–∞ TypeScript. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: <span class="kbd">+</span>/<span class="kbd">-</span> ‚Äî –∑—É–º, <span class="kbd">F</span> ‚Äî Fit, <span class="kbd">?</span> ‚Äî —Å–ø—Ä–∞–≤–∫–∞.</span>
        </div>
      </footer>
    </div>

    <!-- –¢–æ—Å—Ç—ã -->
    <div id="toasts" class="toasts"></div>

    <!-- –ú–æ–¥–∞–ª ¬´–°–ø—Ä–∞–≤–∫–∞¬ª -->
    <dialog id="helpModal" class="modal">
      <div class="modal-box">
        <h3>–°–ø—Ä–∞–≤–∫–∞</h3>
        <ul>
          <li>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —É–∑–ª—ã –º—ã—à—å—é –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</li>
          <li>–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ —É–∑–ª—É/—Å–≤—è–∑–∏ ‚Äî —Å–º–µ–Ω–∞ —Ü–≤–µ—Ç–∞</li>
          <li>–ö–æ–ª–µ—Å–æ –Ω–∞–¥ –¥–∏–∞–≥—Ä–∞–º–º–æ–π ‚Äî –∑—É–º; –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ —Ñ–æ–Ω–∞ ‚Äî –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
          <li>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –Ω–∞–∂–º–∏—Ç–µ <em>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫‚Ä¶</em></li>
          <li>CSV: –∑–∞–≥—Ä—É–∑–∏—Ç–µ <strong>links.csv</strong> –∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) <strong>nodes.csv</strong>, –∑–∞—Ç–µ–º ¬´–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É¬ª</li>
        </ul>
        <h4>–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏</h4>
        <p><span class="kbd">?</span> –°–ø—Ä–∞–≤–∫–∞ ¬∑ <span class="kbd">+</span>/<span class="kbd">-</span> –ó—É–º ¬∑ <span class="kbd">F</span> Fit ¬∑ <span class="kbd">S</span> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ ¬∑ <span class="kbd">L</span> –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ</p>
        <div class="modal-actions">
          <button id="helpCloseBtn" class="btn">–û–∫</button>
        </div>
      </div>
    </dialog>
  </body>
</html>
